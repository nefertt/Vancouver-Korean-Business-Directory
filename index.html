<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ ëª©ë¡ - Vancouver Korean Business Directory</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="header-top">
            <div class="logo">
              <a href="./index.html">
                <h1>ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ ëª©ë¡</h1>
              </a>
            </div>
            <nav class="nav">
              <a href="./index.html" class="nav-link active">í™ˆ</a>
              <a href="./directory.html" class="nav-link">ì—…ì²´ ëª©ë¡</a>
              <a href="./map.html" class="nav-link">ì§€ë„</a>
              <a href="./board.html" class="nav-link">ê²Œì‹œíŒ</a>
              <a href="./submit.html" class="nav-link">ì—…ì²´ ë“±ë¡</a>
              <a href="./guide.html" class="nav-link">ê°€ì´ë“œ</a>
              <a href="./about.html" class="nav-link">ì†Œê°œ</a>
            </nav>
            <div class="header-controls">
              <div class="language-toggle">
                <button class="lang-btn active" data-lang="ko">KO</button>
                <button class="lang-btn" data-lang="en">EN</button>
              </div>
              <button class="theme-toggle" id="themeToggle">
                <span id="themeIcon">ğŸŒ™</span>
              </button>
            </div>
          </div>
          <nav class="nav mobile-nav">
            <a href="./index.html" class="nav-link active">í™ˆ</a>
            <a href="./directory.html" class="nav-link">ì—…ì²´ ëª©ë¡</a>
            <a href="./map.html" class="nav-link">ì§€ë„</a>
            <a href="./board.html" class="nav-link">ê²Œì‹œíŒ</a>
            <a href="./submit.html" class="nav-link">ì—…ì²´ ë“±ë¡</a>
            <a href="./guide.html" class="nav-link">ê°€ì´ë“œ</a>
            <a href="./about.html" class="nav-link">ì†Œê°œ</a>
          </nav>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <h2 class="hero-title" id="hero-title">ë°´ì¿ ë²„ ìƒí™œ, í•œ ë²ˆì— ì°¾ëŠ” í•œì¸ ì—…ì²´ ëª©ë¡</h2>
          <p class="hero-subtitle" id="hero-subtitle">ìŒì‹ì , ë§ˆíŠ¸, ë³‘ì›, ë¶€ë™ì‚°, ëª¨ë“  ìƒí™œ ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ.</p>
          <div class="search-container">
            <input type="text" class="search-input" id="search-input" placeholder="ì—…ì²´ëª… Â· ì—…ì¢… Â· ì§€ì—­ìœ¼ë¡œ ê²€ìƒ‰" />
            <button class="search-btn" id="search-btn">ê²€ìƒ‰</button>
          </div>
          <button class="cta-btn" id="cta-btn">ë‚´ ì£¼ë³€ í•œì¸ ì—…ì²´ ë³´ê¸°</button>
        </div>
      </div>
    </section>

    <!-- Category Grid -->
    <section class="categories">
      <div class="container">
        <h3 class="section-title">ì¹´í…Œê³ ë¦¬ë³„ ì°¾ê¸°</h3>
        <div class="category-grid">
          <!-- Categories will be loaded dynamically from Google Sheets -->
        </div>
      </div>
    </section>

    <!-- Featured Businesses -->
    <section class="featured">
      <div class="container">
        <h3 class="section-title">ì¶”ì²œ ì—…ì²´</h3>
        <div class="featured-grid">
          <!-- Featured businesses will be loaded dynamically from Google Sheets -->
        </div>
      </div>
    </section>

    <!-- Map and Instagram Section -->
    <section class="map-instagram-section">
      <div class="container">
        <div class="map-instagram-grid">
          <!-- Map Preview -->
          <div class="map-preview">
            <h3 class="section-title">ì§€ë„ì—ì„œ ë³´ê¸°</h3>
            <div class="map-container">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2603.123456789!2d-123.1207!3d49.2827!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDnCsDE2JzU3LjciTiAxMjPCsDA3JzE0LjUiVw!5e0!3m2!1sko!2sca!4v1234567890123!5m2!1sko!2sca"
                class="google-map-embed"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
              >
              </iframe>
              <div class="map-overlay">
                <div class="map-info">
                  <h4>ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ ìœ„ì¹˜</h4>
                  <p>ì§€ë„ì—ì„œ í•œì¸ ì—…ì²´ë“¤ì„ ì°¾ì•„ë³´ì„¸ìš”</p>
                  <button class="map-btn" onclick="window.open('https://www.google.com/maps', '_blank')">
                    ì „ì²´ ì§€ë„ ë³´ê¸°
                  </button>
                </div>
              </div>
            </div>

            <!-- Advertisement Banner -->
            <div class="ad-banner">
              <div class="ad-content">
                <div class="ad-header">
                  <span class="ad-label">ê´‘ê³ </span>
                </div>
                <div class="ad-main">
                  <div class="ad-image">ğŸ¢</div>
                  <div class="ad-text">
                    <h4>ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ í™ë³´</h4>
                    <p>ì—¬ê¸°ì— ì—¬ëŸ¬ë¶„ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™ë³´í•´ë³´ì„¸ìš”!</p>
                    <div class="ad-cta">
                      <button class="ad-btn">ê´‘ê³  ë¬¸ì˜í•˜ê¸°</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Statistics Banner -->
            <div class="stats-banner">
              <div class="stats-content">
                <div class="stats-header">
                  <span class="stats-label">í†µê³„</span>
                </div>
                <div class="stats-grid">
                  <div class="stat-item">
                    <div class="stat-icon">ğŸª</div>
                    <div class="stat-info">
                      <span class="stat-number">150+</span>
                      <span class="stat-label stat-businesses">ë“±ë¡ëœ ì—…ì²´</span>
                    </div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-icon">ğŸ‘¥</div>
                    <div class="stat-info">
                      <span class="stat-number">5,000+</span>
                      <span class="stat-label stat-visitors">ì›” ë°©ë¬¸ì</span>
                    </div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-icon">â­</div>
                    <div class="stat-info">
                      <span class="stat-number">4.8</span>
                      <span class="stat-label stat-rating">í‰ê·  í‰ì </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Instagram Feed -->
          <div class="instagram-feed">
            <div class="instagram-container">
              <div class="instagram-embed">
                <div class="instagram-post-single">
                  <div class="post-header">
                    <div class="post-profile">
                      <div class="profile-pic">ğŸ“·</div>
                      <div class="profile-info">
                        <span class="username">@ë°´ì¿ ë²„í•œì¸ë¹„ì¦ˆë‹ˆìŠ¤</span>
                        <span class="location">Vancouver, BC</span>
                      </div>
                    </div>
                    <div class="post-menu">â‹¯</div>
                  </div>
                  <div class="post-image-container">
                    <div class="post-image-main">ğŸ–¼ï¸</div>
                  </div>
                  <div class="post-actions">
                    <div class="action-buttons">
                      <span class="action-btn">â¤ï¸</span>
                      <span class="action-btn">ğŸ’¬</span>
                      <span class="action-btn">ğŸ“¤</span>
                    </div>
                    <span class="action-btn bookmark">ğŸ”–</span>
                  </div>
                  <div class="post-content">
                    <p><strong>@ë°´ì¿ ë²„í•œì¸ë¹„ì¦ˆë‹ˆìŠ¤</strong> ë°´ì¿ ë²„ í•œì¸ ì»¤ë®¤ë‹ˆí‹°ì˜ ìµœì‹  ì†Œì‹ì„ ë§Œë‚˜ë³´ì„¸ìš”! ğŸ™ï¸âœ¨</p>
                    <p class="post-time">2ì‹œê°„ ì „</p>
                  </div>
                </div>
                <button class="instagram-btn">ì¸ìŠ¤íƒ€ê·¸ë¨ì—ì„œ ë” ë³´ê¸°</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Scroll to Top Button -->
    <button class="scroll-to-top" id="scrollToTop" title="ë§¨ ìœ„ë¡œ ê°€ê¸°">â†‘</button>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <h3>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h3>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>ì¹´í…Œê³ ë¦¬</h4>
            <ul>
              <li><a href="#">ìŒì‹ì </a></li>
              <li><a href="#">ë§ˆíŠ¸</a></li>
              <li><a href="#">ë³‘ì›</a></li>
              <li><a href="#">ë¶€ë™ì‚°</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>ê°€ì´ë“œ</h4>
            <ul>
              <li><a href="#">ì´ë¯¼ ê°€ì´ë“œ</a></li>
              <li><a href="#">ìƒí™œ íŒ</a></li>
              <li><a href="#">ë²•ë¥  ì •ë³´</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>íšŒì‚¬</h4>
            <ul>
              <li><a href="#">About</a></li>
              <li><a href="#">Contact</a></li>
              <li><a href="#">Submit Business</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>ì†Œì…œ</h4>
            <div class="social-links">
              <a href="#" class="social-link">ğŸ“±</a>
              <a href="#" class="social-link">ğŸ“·</a>
              <a href="#" class="social-link">ğŸ“˜</a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ ëª©ë¡. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <!-- script.js removed to avoid conflicts with Google Sheets loading -->
    <!-- <script src="scripts/script.js"></script> -->
    <script>
      // Dark Mode Toggle
      document.addEventListener('DOMContentLoaded', function () {
        const themeToggle = document.getElementById('themeToggle');
        const langToggle = document.querySelector('.language-toggle');
        const themeIcon = document.getElementById('themeIcon');
        const body = document.body;

        // Load saved theme and language
        const savedTheme = localStorage.getItem('theme') || 'light';
        const savedLang = localStorage.getItem('language') || 'ko';

        body.setAttribute('data-theme', savedTheme);
        body.setAttribute('lang', savedLang);
        updateThemeIcon(savedTheme);
        updateLanguageIcon(savedLang);

        // Delay navigation update to ensure DOM is fully ready
        setTimeout(() => {
          updateNavigation(savedLang);
        }, 10);

        themeToggle.addEventListener('click', function () {
          const currentTheme = body.getAttribute('data-theme');
          const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

          body.setAttribute('data-theme', newTheme);
          localStorage.setItem('theme', newTheme);
          updateThemeIcon(newTheme);
        });

        function updateThemeIcon(theme) {
          themeIcon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        // Language toggle event listener
        langToggle.addEventListener('click', function (e) {
          if (e.target.classList.contains('lang-btn')) {
            const newLang = e.target.getAttribute('data-lang');

            // Update active button
            langToggle.querySelectorAll('.lang-btn').forEach((btn) => {
              btn.classList.remove('active');
            });
            e.target.classList.add('active');

            body.setAttribute('lang', newLang);
            localStorage.setItem('language', newLang);
            updateLanguageIcon(newLang);
            updateNavigation(newLang);
          }
        });

        function updateNavigation(lang) {
          const navLinks = document.querySelectorAll('.nav-link');

          // Check if DOM is ready
          if (navLinks.length === 0) {
            return;
          }
          const navTexts = {
            ko: ['í™ˆ', 'ì—…ì²´ ëª©ë¡', 'ì§€ë„', 'ê²Œì‹œíŒ', 'ì—…ì²´ ë“±ë¡', 'ê°€ì´ë“œ', 'ì†Œê°œ'],
            en: ['Home', 'Directory', 'Map', 'Board', 'Submit', 'Guides', 'About'],
          };

          navLinks.forEach((link, index) => {
            // Calculate the correct index for navTexts (0-6 for 7 navigation items)
            const navIndex = index % 7;
            if (navTexts[lang] && navTexts[lang][navIndex]) {
              link.textContent = navTexts[lang][navIndex];
            }
          });

          // Update section titles and content
          updateSectionContent(lang);
        }

        function updateLanguageIcon(lang) {
          const langButtons = document.querySelectorAll('.lang-btn');
          langButtons.forEach((btn) => {
            btn.classList.remove('active');
            if (btn.getAttribute('data-lang') === lang) {
              btn.classList.add('active');
            }
          });
        }

        function updateSectionContent(lang) {
          console.log('ğŸ”„ Updating section content for language:', lang);
          const sectionTexts = {
            ko: {
              'hero-title': 'ë°´ì¿ ë²„ ìƒí™œ, í•œ ë²ˆì— ì°¾ëŠ” í•œì¸ ì—…ì²´ ëª©ë¡',
              'hero-subtitle': 'ìŒì‹ì , ë§ˆíŠ¸, ë³‘ì›, ë¶€ë™ì‚°, ëª¨ë“  ìƒí™œ ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ.',
              'search-placeholder': 'ì—…ì²´ëª… Â· ì—…ì¢… Â· ì§€ì—­ìœ¼ë¡œ ê²€ìƒ‰',
              'search-btn': 'ê²€ìƒ‰',
              'cta-btn': 'ë‚´ ì£¼ë³€ í•œì¸ ì—…ì²´ ë³´ê¸°',
              'categories-title': 'ì¹´í…Œê³ ë¦¬ë³„ ì°¾ê¸°',
              'categories-subtitle': 'ì›í•˜ëŠ” ì—…ì¢…ì„ ì„ íƒí•˜ì—¬ ì—…ì²´ë¥¼ ì°¾ì•„ë³´ì„¸ìš”',
              'featured-title': 'ì¶”ì²œ ì—…ì²´',
              'featured-subtitle': 'ì¸ê¸° ìˆëŠ” í•œì¸ ì—…ì²´ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”',
              'map-title': 'ì§€ë„ì—ì„œ ë³´ê¸°',
              'map-description': 'Google Map with Korean business locations',
              'map-button': 'ì§€ë„ì—ì„œ ë³´ê¸°',
              'instagram-button': 'ì¸ìŠ¤íƒ€ê·¸ë¨ì—ì„œ ë” ë³´ê¸°',
              'ad-label': 'ê´‘ê³ ',
              'ad-title': 'ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ í™ë³´',
              'ad-description': 'ì—¬ê¸°ì— ì—¬ëŸ¬ë¶„ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™ë³´í•´ë³´ì„¸ìš”!',
              'ad-button': 'ê´‘ê³  ë¬¸ì˜í•˜ê¸°',
              'stats-label': 'í†µê³„',
              'stat-businesses': 'ë“±ë¡ëœ ì—…ì²´',
              'stat-visitors': 'ì›” ë°©ë¬¸ì',
              'stat-rating': 'í‰ê·  í‰ì ',
              'footer-categories': 'ì¹´í…Œê³ ë¦¬',
              'footer-popular': 'ì¸ê¸°',
              'footer-support': 'ì§€ì›',
              'footer-about': 'ì†Œê°œ',
              'footer-copyright': 'All rights reserved.',
              'footer-restaurants': 'ìŒì‹ì ',
              'footer-cafes': 'ì¹´í˜',
              'footer-markets': 'ë§ˆíŠ¸',
              'footer-services': 'ì„œë¹„ìŠ¤',
              'footer-featured': 'ì¶”ì²œ',
              'footer-new': 'ì‹ ê·œ',
              'footer-help': 'ë„ì›€ë§',
              'footer-contact': 'ë¬¸ì˜',
              'footer-privacy': 'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨',
              'footer-terms': 'ì´ìš©ì•½ê´€',
              'footer-company': 'íšŒì‚¬',
              'footer-team': 'íŒ€ ì†Œê°œ',
              'footer-careers': 'ì±„ìš©',
              'footer-news': 'ë‰´ìŠ¤',
            },
            en: {
              'hero-title': 'Vancouver Korean Business Directory',
              'hero-subtitle': 'Find all Korean businesses in Vancouver in one place',
              'search-placeholder': 'Search by business name, category, or area',
              'search-btn': 'Search',
              'cta-btn': 'Find Korean Businesses Near Me',
              'categories-title': 'Browse by Category',
              'categories-subtitle': 'Select your preferred business type to find establishments',
              'featured-title': 'Featured Businesses',
              'featured-subtitle': 'Discover popular Korean businesses',
              'map-title': 'View on Map',
              'map-description': 'Google Map with Korean business locations',
              'map-button': 'View on Map',
              'instagram-button': 'View More on Instagram',
              'ad-label': 'Ad',
              'ad-title': 'Vancouver Korean Business Promotion',
              'ad-description': 'Promote your business here!',
              'ad-button': 'Contact for Ads',
              'stats-label': 'Statistics',
              'stat-businesses': 'Registered Businesses',
              'stat-visitors': 'Monthly Visitors',
              'stat-rating': 'Average Rating',
              'footer-categories': 'Categories',
              'footer-popular': 'Popular',
              'footer-support': 'Support',
              'footer-about': 'About',
              'footer-copyright': 'All rights reserved.',
              'footer-restaurants': 'Restaurants',
              'footer-cafes': 'Cafes',
              'footer-markets': 'Markets',
              'footer-services': 'Services',
              'footer-featured': 'Featured',
              'footer-new': 'New',
              'footer-help': 'Help Center',
              'footer-contact': 'Contact',
              'footer-privacy': 'Privacy Policy',
              'footer-terms': 'Terms of Service',
              'footer-company': 'Company',
              'footer-team': 'Our Team',
              'footer-careers': 'Careers',
              'footer-news': 'News',
            },
          };

          const texts = sectionTexts[lang];
          if (!texts) return;

          // Update hero section
          const heroTitle = document.getElementById('hero-title');
          const heroSubtitle = document.getElementById('hero-subtitle');
          const searchInput = document.getElementById('search-input');
          const searchBtn = document.getElementById('search-btn');
          const ctaBtn = document.getElementById('cta-btn');

          console.log('Hero title element:', heroTitle);
          console.log('Hero subtitle element:', heroSubtitle);

          if (heroTitle) {
            heroTitle.textContent = texts['hero-title'];
            console.log('Updated hero title to:', texts['hero-title']);
          }
          if (heroSubtitle) {
            heroSubtitle.textContent = texts['hero-subtitle'];
            console.log('Updated hero subtitle to:', texts['hero-subtitle']);
          }
          if (searchInput) {
            searchInput.placeholder = texts['search-placeholder'];
          }
          if (searchBtn) {
            searchBtn.textContent = texts['search-btn'];
          }
          if (ctaBtn) {
            ctaBtn.textContent = texts['cta-btn'];
          }

          // Update categories section
          const categoriesTitle = document.querySelector('.categories .section-title');
          const categoriesSubtitle = document.querySelector('.categories p');
          if (categoriesTitle) categoriesTitle.textContent = texts['categories-title'];
          if (categoriesSubtitle) categoriesSubtitle.textContent = texts['categories-subtitle'];

          // Update featured section
          const featuredTitle = document.querySelector('.featured .section-title');
          const featuredSubtitle = document.querySelector('.featured p');
          if (featuredTitle) featuredTitle.textContent = texts['featured-title'];
          if (featuredSubtitle) featuredSubtitle.textContent = texts['featured-subtitle'];

          // Update map section
          const mapTitle = document.querySelector('.map-preview .section-title');
          const mapDescription = document.querySelector('.map-content p');
          const mapButton = document.querySelector('.map-btn');
          if (mapTitle) mapTitle.textContent = texts['map-title'];
          if (mapDescription) mapDescription.textContent = texts['map-description'];
          if (mapButton) mapButton.textContent = texts['map-button'];

          // Update Instagram section
          const instagramButton = document.querySelector('.instagram-btn');
          if (instagramButton) instagramButton.textContent = texts['instagram-button'];

          // Update Advertisement section
          const adLabel = document.querySelector('.ad-label');
          const adTitle = document.querySelector('.ad-text h4');
          const adDescription = document.querySelector('.ad-text p');
          const adButton = document.querySelector('.ad-btn');
          if (adLabel) adLabel.textContent = texts['ad-label'];
          if (adTitle) adTitle.textContent = texts['ad-title'];
          if (adDescription) adDescription.textContent = texts['ad-description'];
          if (adButton) adButton.textContent = texts['ad-button'];

          // Update Statistics section
          const statsLabel = document.querySelector('.stats-label');
          const statBusinesses = document.querySelector('.stat-businesses');
          const statVisitors = document.querySelector('.stat-visitors');
          const statRating = document.querySelector('.stat-rating');
          if (statsLabel) statsLabel.textContent = texts['stats-label'];
          if (statBusinesses) statBusinesses.textContent = texts['stat-businesses'];
          if (statVisitors) statVisitors.textContent = texts['stat-visitors'];
          if (statRating) statRating.textContent = texts['stat-rating'];

          // Update categories section
          updateCategoriesSection(lang);

          // Reload categories with new language
          if (window.categoryData) {
            renderCategories(window.categoryData, lang);
          }

          // Update footer
          updateFooter(lang);
        }

        function updateCategoriesSection(lang) {
          const categoryCards = document.querySelectorAll('.category-card');

          categoryCards.forEach((card) => {
            const titleElement = card.querySelector('h4');
            const subtitleElement = card.querySelector('p');

            if (titleElement) {
              // Get the category data
              const categoryData = window.categoryData || [];

              if (lang === 'en') {
                // English: Show English category name as title, hide subtitle
                const currentTitle = titleElement.textContent;
                const category = categoryData.find((cat) => cat.categoryDisplay === currentTitle);
                if (category) {
                  titleElement.textContent = category.category;
                }
                // Hide subtitle for English
                if (subtitleElement) {
                  subtitleElement.style.display = 'none';
                }
              } else {
                // Korean: Show Korean category name as title, English category name as subtitle
                const currentTitle = titleElement.textContent;
                const category = categoryData.find((cat) => cat.category === currentTitle);
                if (category) {
                  titleElement.textContent = category.categoryDisplay;
                  if (subtitleElement) {
                    subtitleElement.textContent = category.category;
                    subtitleElement.style.display = 'block';
                  }
                }
              }
            }
          });
        }

        function updateFooter(lang) {
          const footerTexts = {
            ko: {
              'footer-categories': 'ì¹´í…Œê³ ë¦¬',
              'footer-popular': 'ì¸ê¸°',
              'footer-support': 'ì§€ì›',
              'footer-about': 'ì†Œê°œ',
              'footer-copyright': 'All rights reserved.',
              'footer-restaurants': 'ìŒì‹ì ',
              'footer-cafes': 'ì¹´í˜',
              'footer-markets': 'ë§ˆíŠ¸',
              'footer-services': 'ì„œë¹„ìŠ¤',
              'footer-featured': 'ì¶”ì²œ',
              'footer-new': 'ì‹ ê·œ',
              'footer-help': 'ë„ì›€ë§',
              'footer-contact': 'ë¬¸ì˜',
              'footer-privacy': 'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨',
              'footer-terms': 'ì´ìš©ì•½ê´€',
              'footer-company': 'íšŒì‚¬',
              'footer-team': 'íŒ€ ì†Œê°œ',
              'footer-careers': 'ì±„ìš©',
              'footer-news': 'ë‰´ìŠ¤',
            },
            en: {
              'footer-categories': 'Categories',
              'footer-popular': 'Popular',
              'footer-support': 'Support',
              'footer-about': 'About',
              'footer-copyright': 'All rights reserved.',
              'footer-restaurants': 'Restaurants',
              'footer-cafes': 'Cafes',
              'footer-markets': 'Markets',
              'footer-services': 'Services',
              'footer-featured': 'Featured',
              'footer-new': 'New',
              'footer-help': 'Help Center',
              'footer-contact': 'Contact',
              'footer-privacy': 'Privacy Policy',
              'footer-terms': 'Terms of Service',
              'footer-company': 'Company',
              'footer-team': 'Our Team',
              'footer-careers': 'Careers',
              'footer-news': 'News',
            },
          };

          const texts = footerTexts[lang];
          if (!texts) return;

          // Update footer section titles
          const footerSections = document.querySelectorAll('.footer-section h4');
          if (footerSections[0]) footerSections[0].textContent = texts['footer-categories'];
          if (footerSections[1]) footerSections[1].textContent = texts['footer-popular'];
          if (footerSections[2]) footerSections[2].textContent = texts['footer-support'];
          if (footerSections[3]) footerSections[3].textContent = texts['footer-about'];

          // Update footer links
          const footerLinks = document.querySelectorAll('.footer-section ul li a');
          if (footerLinks[0]) footerLinks[0].textContent = texts['footer-restaurants'];
          if (footerLinks[1]) footerLinks[1].textContent = texts['footer-cafes'];
          if (footerLinks[2]) footerLinks[2].textContent = texts['footer-markets'];
          if (footerLinks[3]) footerLinks[3].textContent = texts['footer-services'];
          if (footerLinks[4]) footerLinks[4].textContent = texts['footer-featured'];
          if (footerLinks[5]) footerLinks[5].textContent = texts['footer-new'];
          if (footerLinks[6]) footerLinks[6].textContent = texts['footer-help'];
          if (footerLinks[7]) footerLinks[7].textContent = texts['footer-contact'];
          if (footerLinks[8]) footerLinks[8].textContent = texts['footer-privacy'];
          if (footerLinks[9]) footerLinks[9].textContent = texts['footer-terms'];
          if (footerLinks[10]) footerLinks[10].textContent = texts['footer-company'];
          if (footerLinks[11]) footerLinks[11].textContent = texts['footer-team'];
          if (footerLinks[12]) footerLinks[12].textContent = texts['footer-careers'];
          if (footerLinks[13]) footerLinks[13].textContent = texts['footer-news'];
        }

        // Initialize with Korean
        updateNavigation('ko');

        // Load featured businesses from Google Sheets
        loadFeaturedBusinesses();

        // Load categories from Google Sheets
        loadCategories();

        // Google Sheets configuration
        const SHEET_ID = '1VNJf3ffSD5nHVvH6D75a44qMbU2HWVfRMp7AvTcNThg';
        const SHEET_NAME = 'Sheet1';

        // Performance configuration
        const PERFORMANCE_LIMITS = {
          MAX_BUSINESSES: 1000, // Maximum businesses to load for performance
          FEATURED_LIMIT: 6, // Featured businesses on homepage
          CATEGORY_LIMIT: 20, // Maximum categories to display
          BATCH_SIZE: 100, // For future pagination implementation
        };

        async function loadFeaturedBusinesses() {
          try {
            console.log('ğŸ”„ Loading featured businesses from Google Sheets...');
            console.log('ğŸ“Š Sheet ID:', SHEET_ID);
            console.log('ğŸ“‹ Sheet Name:', SHEET_NAME);
            console.log('ğŸ• Timestamp:', new Date().toISOString());

            // Add timestamp to prevent browser caching
            const timestamp = new Date().getTime();
            const response = await fetch(
              `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${SHEET_NAME}&_t=${timestamp}`,
            );

            console.log('ğŸ“¡ Response status:', response.status);
            console.log('ğŸ“¡ Response ok:', response.ok);
            console.log('ğŸ“¡ Response headers:', Object.fromEntries(response.headers.entries()));

            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
            }

            const csvText = await response.text();
            console.log('ğŸ“„ CSV data length:', csvText.length);
            console.log('ğŸ“„ CSV data received (first 200 chars):', csvText.substring(0, 200) + '...');
            console.log(
              'ğŸ“„ CSV data received (last 200 chars):',
              '...' + csvText.substring(Math.max(0, csvText.length - 200)),
            );

            if (!csvText || csvText.trim().length === 0) {
              throw new Error('CSV data is empty');
            }

            const businesses = parseCSV(csvText);
            console.log('ğŸ“Š Parsed businesses count:', businesses.length);
            console.log('ğŸ“Š Parsed businesses:', businesses);

            // Apply performance limits
            const limitedBusinesses = businesses.slice(0, PERFORMANCE_LIMITS.MAX_BUSINESSES);
            if (businesses.length > PERFORMANCE_LIMITS.MAX_BUSINESSES) {
              console.warn(`âš ï¸ Limited to ${PERFORMANCE_LIMITS.MAX_BUSINESSES} businesses for performance`);
            }

            // Filter featured businesses - if no featured column, show first 6 businesses
            let featuredBusinesses;
            const hasFeaturedColumn = businesses.length > 0 && businesses[0].hasOwnProperty('featured');

            console.log('ğŸ” Has featured column:', hasFeaturedColumn);
            console.log('ğŸ“Š First business keys:', businesses.length > 0 ? Object.keys(businesses[0]) : []);
            console.log('ğŸ“Š Limited businesses count:', limitedBusinesses.length);

            if (hasFeaturedColumn) {
              // If featured column exists, filter by it
              const featuredFiltered = limitedBusinesses.filter(
                (business) => business.featured === 'true' || business.featured === 'TRUE' || business.featured === '1',
              );
              console.log('â­ Featured filtered count:', featuredFiltered.length);
              featuredBusinesses = featuredFiltered.slice(0, PERFORMANCE_LIMITS.FEATURED_LIMIT);
            } else {
              // If no featured column, show first N businesses
              console.log('ğŸ“‹ No featured column, showing first', PERFORMANCE_LIMITS.FEATURED_LIMIT, 'businesses');
              featuredBusinesses = limitedBusinesses.slice(0, PERFORMANCE_LIMITS.FEATURED_LIMIT);
            }

            console.log('ğŸ“Š Total businesses:', businesses.length);
            console.log('â­ Featured businesses:', featuredBusinesses.length);

            console.log('âœ… Featured businesses loaded:', featuredBusinesses);
            renderFeaturedBusinesses(featuredBusinesses);
          } catch (error) {
            console.error('âŒ Error loading featured businesses:', error);
            console.error('âŒ Error details:', error.message);
            console.error('âŒ Error stack:', error.stack);

            // Show detailed error message for debugging
            const featuredGrid = document.querySelector('.featured-grid');
            if (featuredGrid) {
              featuredGrid.innerHTML = `
                <div style="text-align: center; padding: 2rem; color: #666;">
                  <p>ì¶”ì²œ ì—…ì²´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                  <p style="font-size: 0.9rem; margin-top: 0.5rem;">ì˜¤ë¥˜: ${error.message}</p>
                  <p style="font-size: 0.8rem; margin-top: 0.5rem;">ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
                  <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #1e4da1; color: white; border: none; border-radius: 4px; cursor: pointer;">ìƒˆë¡œê³ ì¹¨</button>
                </div>
              `;
            }

            // Also try to render static fallback
            console.log('ğŸ”„ Attempting static fallback...');
            renderStaticFeaturedBusinesses();
          }
        }

        function parseCSV(csvText) {
          try {
            console.log('ğŸ“„ Parsing CSV data...');
            const lines = csvText.split('\n');
            console.log('ğŸ“„ CSV lines count:', lines.length);

            if (lines.length < 2) {
              throw new Error('CSV data is too short');
            }

            const headers = parseCSVLine(lines[0]);
            console.log('ğŸ“„ Headers:', headers);
            const businesses = [];

            for (let i = 1; i < lines.length; i++) {
              if (lines[i].trim()) {
                const values = parseCSVLine(lines[i]);
                console.log(`ğŸ“„ Row ${i} values:`, values);

                if (values.length !== headers.length) {
                  console.warn(`âš ï¸ Row ${i} has ${values.length} values but expected ${headers.length}`);
                }

                const business = {};
                headers.forEach((header, index) => {
                  business[header] = values[index] || '';
                });
                businesses.push(business);
              }
            }

            console.log('ğŸ“„ Parsed businesses:', businesses);
            return businesses;
          } catch (error) {
            console.error('âŒ CSV parsing error:', error);
            throw error;
          }
        }

        function parseCSVLine(line) {
          try {
            const result = [];
            let current = '';
            let inQuotes = false;

            for (let i = 0; i < line.length; i++) {
              const char = line[i];

              if (char === '"') {
                inQuotes = !inQuotes;
              } else if (char === ',' && !inQuotes) {
                result.push(current.trim().replace(/^"|"$/g, ''));
                current = '';
              } else {
                current += char;
              }
            }

            result.push(current.trim().replace(/^"|"$/g, ''));
            return result;
          } catch (error) {
            console.error('âŒ CSV line parsing error:', error);
            console.error('âŒ Problematic line:', line);
            throw error;
          }
        }

        function renderFeaturedBusinesses(businesses) {
          console.log('ğŸ¨ renderFeaturedBusinesses called with:', businesses);

          const featuredGrid = document.querySelector('.featured-grid');
          if (!featuredGrid) {
            console.error('âŒ Featured grid not found!');
            console.error("âŒ Available elements with 'grid' in class:", document.querySelectorAll('[class*="grid"]'));
            return;
          }

          console.log('ğŸ¨ Rendering featured businesses...');
          console.log('ğŸ¨ Featured grid element:', featuredGrid);
          featuredGrid.innerHTML = '';

          if (!businesses || businesses.length === 0) {
            console.warn('âš ï¸ No businesses to render');
            featuredGrid.innerHTML = '<p>ì¶”ì²œ ì—…ì²´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
          }

          console.log('ğŸ¨ Rendering', businesses.length, 'businesses');

          businesses.forEach((business, index) => {
            console.log(`ğŸ“ Creating card ${index + 1}:`, business.name || business.nameEn || 'Unknown');
            try {
              const businessCard = createBusinessCard(business);
              featuredGrid.appendChild(businessCard);
              console.log(`âœ… Card ${index + 1} created successfully`);
            } catch (error) {
              console.error(`âŒ Error creating card ${index + 1}:`, error);
            }
          });

          console.log('âœ… Featured businesses rendered successfully!');
          console.log('âœ… Final featured grid children count:', featuredGrid.children.length);
        }

        function createBusinessCard(business) {
          console.log('ğŸ”§ Creating business card for:', business);

          const card = document.createElement('div');
          card.className = 'business-card';

          const categoryIcon = getCategoryIcon(business.category);
          const categoryDisplay = business.categoryDisplay || business.category || 'ì—…ì²´';

          console.log('ğŸ”§ Category icon:', categoryIcon);
          console.log('ğŸ”§ Category display:', categoryDisplay);

          card.innerHTML = `
            <div class="business-image">
              <img
                src="${
                  business.image || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop'
                }"
                alt="${business.name || business.nameEn || 'Business'}"
                onerror="this.src='https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop'"
              />
            </div>
            <div class="business-info">
              <h4>${business.name || business.nameEn || 'ì—…ì²´ëª…'}</h4>
              <p class="business-category">${categoryIcon} ${categoryDisplay}</p>
              <p class="business-location">${business.address || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}</p>
            </div>
          `;

          console.log('ğŸ”§ Card HTML created:', card.outerHTML.substring(0, 200) + '...');
          return card;
        }

        // Load categories from Google Sheets
        async function loadCategories(lang = 'ko') {
          try {
            console.log('ğŸ”„ Loading categories from Google Sheets...');

            // Add timestamp to prevent browser caching
            const timestamp = new Date().getTime();
            const response = await fetch(
              `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${SHEET_NAME}&_t=${timestamp}`,
            );

            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }

            const csvText = await response.text();
            const businesses = parseCSV(csvText);

            // Extract unique categories from businesses
            const categoryMap = new Map();
            businesses.forEach((business) => {
              if (business.category && business.categoryDisplay) {
                const categoryKey = business.category.toLowerCase();
                if (!categoryMap.has(categoryKey)) {
                  categoryMap.set(categoryKey, {
                    category: business.category,
                    categoryDisplay: business.categoryDisplay,
                    icon: getCategoryIcon(business.category),
                  });
                }
              }
            });

            const categories = Array.from(categoryMap.values());
            console.log('ğŸ“Š Categories loaded:', categories);

            // Store categories globally for language switching
            window.categoryData = categories;

            renderCategories(categories, lang);
          } catch (error) {
            console.error('âŒ Error loading categories:', error);
            // Fallback to static categories
            renderStaticCategories(lang);
          }
        }

        function getCategoryIcon(category) {
          const iconMap = {
            restaurant: 'ğŸœ',
            grocery: 'ğŸ›’',
            medical: 'ğŸ¥',
            legal: 'âš–ï¸',
            realestate: 'ğŸ ',
            beauty: 'ğŸ’‡',
            automotive: 'ğŸš—',
            education: 'ğŸ“',
            ìŒì‹ì : 'ğŸœ',
            ë§ˆíŠ¸: 'ğŸ›’',
            ë³‘ì›: 'ğŸ¥',
            ë²•ë¥ : 'âš–ï¸',
            ë¶€ë™ì‚°: 'ğŸ ',
            ë¯¸ìš©: 'ğŸ’‡',
            ìë™ì°¨: 'ğŸš—',
            êµìœ¡: 'ğŸ“',
          };

          return iconMap[category.toLowerCase()] || 'ğŸ“‹';
        }

        function renderCategories(categories, lang = 'ko') {
          const categoryGrid = document.querySelector('.category-grid');
          if (!categoryGrid) {
            console.error('âŒ Category grid not found!');
            return;
          }

          console.log('ğŸ¨ Rendering categories...');
          categoryGrid.innerHTML = '';

          categories.forEach((category, index) => {
            const categoryCard = createCategoryCard(category, lang);
            categoryGrid.appendChild(categoryCard);
          });

          console.log('âœ… Categories rendered successfully!');
        }

        function createCategoryCard(category, lang = 'ko') {
          const card = document.createElement('div');
          card.className = 'category-card';

          // Get current language
          const isKorean = lang === 'ko';

          card.innerHTML = `
            <div class="category-icon">${category.icon}</div>
            <h4>${isKorean ? category.categoryDisplay : category.category}</h4>
            ${isKorean ? `<p>${category.category}</p>` : ''}
          `;

          return card;
        }

        function renderStaticCategories(lang = 'ko') {
          // Fallback static categories
          const staticCategories = [
            { category: 'Restaurants', categoryDisplay: 'ìŒì‹ì ', icon: 'ğŸœ' },
            { category: 'Grocery Stores', categoryDisplay: 'ë§ˆíŠ¸', icon: 'ğŸ›’' },
            { category: 'Medical', categoryDisplay: 'ë³‘ì›', icon: 'ğŸ¥' },
            {
              category: 'Legal/Accounting',
              categoryDisplay: 'ë²•ë¥ /íšŒê³„',
              icon: 'âš–ï¸',
            },
            { category: 'Real Estate', categoryDisplay: 'ë¶€ë™ì‚°', icon: 'ğŸ ' },
            { category: 'Beauty', categoryDisplay: 'ë¯¸ìš©/ë·°í‹°', icon: 'ğŸ’‡' },
            { category: 'Automotive', categoryDisplay: 'ìë™ì°¨', icon: 'ğŸš—' },
            { category: 'Education', categoryDisplay: 'êµìœ¡', icon: 'ğŸ“' },
          ];

          // Store categories globally for language switching
          window.categoryData = staticCategories;

          renderCategories(staticCategories, lang);
        }

        function renderStaticFeaturedBusinesses() {
          // Fallback static featured businesses
          const staticBusinesses = [
            {
              category: 'restaurant',
              categoryDisplay: 'ìŒì‹ì ',
              name: 'í•œì†¥ë„ì‹œë½',
              nameEn: 'Honsot Dosirak',
              description: 'ì •í†µ í•œêµ­ ìš”ë¦¬ë¥¼ ë§›ë³¼ ìˆ˜ ìˆëŠ” ê³³',
              rating: '4.5',
              address: '1234 Kingsway, Burnaby, BC',
              image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop',
            },
            {
              category: 'grocery',
              categoryDisplay: 'ë§ˆíŠ¸',
              name: 'í•œë§ˆìŒë§ˆíŠ¸',
              nameEn: 'Hanmaeum Market',
              description: 'í•œêµ­ ì‹ì¬ë£Œë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ” ë§ˆíŠ¸',
              rating: '4.2',
              address: '5678 Granville St, Vancouver, BC',
              image: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop',
            },
          ];

          console.log('ğŸ”„ Rendering static fallback businesses...');
          renderFeaturedBusinesses(staticBusinesses);
        }

        // Scroll to top functionality
        const scrollToTopBtn = document.getElementById('scrollToTop');

        // Show/hide scroll to top button based on scroll position
        window.addEventListener('scroll', function () {
          if (window.pageYOffset > 300) {
            scrollToTopBtn.classList.add('show');
          } else {
            scrollToTopBtn.classList.remove('show');
          }
        });

        // Smooth scroll to top when button is clicked
        scrollToTopBtn.addEventListener('click', function () {
          window.scrollTo({
            top: 0,
            behavior: 'smooth',
          });
        });
      });
    </script>
  </body>
</html>
