<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì§€ë„ ë³´ê¸° - ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ ëª©ë¡</title>
    <meta
      name="description"
      content="ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ë“¤ì˜ ìœ„ì¹˜ë¥¼ ì¸í„°ë™í‹°ë¸Œ ì§€ë„ì—ì„œ í™•ì¸í•˜ì„¸ìš”. ì¹´í…Œê³ ë¦¬ë³„ ë§ˆì»¤ë¡œ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    />
    <meta name="keywords" content="ë°´ì¿ ë²„ ì§€ë„, í•œì¸ì—…ì²´ ìœ„ì¹˜, í•œì¸ë§ˆíŠ¸, í•œì¸ìŒì‹ì  ìœ„ì¹˜" />
    <link rel="canonical" href="https://nefertt.github.io/Vancouver-Korean-Business-Directory/map.html" />
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://nefertt.github.io/Vancouver-Korean-Business-Directory/map.html" />
    <meta property="og:title" content="ì§€ë„ ë³´ê¸° - ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ ëª©ë¡" />
    <meta property="og:description" content="ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ë“¤ì˜ ìœ„ì¹˜ë¥¼ ì¸í„°ë™í‹°ë¸Œ ì§€ë„ì—ì„œ í™•ì¸í•˜ì„¸ìš”." />
    <meta
      property="og:image"
      content="https://images.unsplash.com/photo-1524661135-423995f22d0b?w=1200&h=630&fit=crop"
    />
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ì§€ë„ ë³´ê¸° - ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ ëª©ë¡" />
    <meta name="twitter:description" content="ë°´ì¿ ë²„ í•œì¸ ì—…ì²´ë“¤ì˜ ìœ„ì¹˜ë¥¼ ì¸í„°ë™í‹°ë¸Œ ì§€ë„ì—ì„œ í™•ì¸í•˜ì„¸ìš”." />
    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸª</text></svg>"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/styles.css" />
    <link rel="stylesheet" href="styles/map.css" />
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-33EN2Y3FC9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-33EN2Y3FC9');
    </script>
    <!-- ê³µí†µ Navbar ë¡œë“œ -->
    <script src="scripts/loadNavbar.js"></script>
  </head>
  <body>
    <!-- Navbar (ë™ì ìœ¼ë¡œ ë¡œë“œ) -->
    <div id="navbar-placeholder"></div>

    <!-- Top Controls -->
    <section class="map-controls">
      <div class="container">
        <div class="controls-content">
          <div class="search-section">
            <div class="search-container">
              <input type="text" class="search-input" placeholder="ì—…ì²´ëª… Â· ì—…ì¢… Â· ì§€ì—­ ê²€ìƒ‰" id="mapSearch" />
              <button class="search-btn">ê²€ìƒ‰</button>
            </div>
          </div>

          <div class="filter-section">
            <div class="category-chips">
              <button class="filter-chip active" data-category="all">ì „ì²´</button>
              <button class="filter-chip" data-category="restaurant">ğŸœ ìŒì‹ì </button>
              <button class="filter-chip" data-category="grocery">ğŸ›’ ë§ˆíŠ¸</button>
              <button class="filter-chip" data-category="medical">ğŸ¥ ë³‘ì›</button>
              <button class="filter-chip" data-category="legal">âš–ï¸ ë²•ë¥ /íšŒê³„</button>
              <button class="filter-chip" data-category="realestate">ğŸ  ë¶€ë™ì‚°</button>
              <button class="filter-chip" data-category="beauty">ğŸ’‡ ë¯¸ìš©</button>
              <button class="filter-chip" data-category="education">ğŸ“ í•™ì›</button>
            </div>

            <div class="control-buttons">
              <button class="control-btn" id="myLocationBtn">
                <span class="btn-icon">ğŸ“</span>
                ë‚´ ìœ„ì¹˜ë¡œ ì´ë™
              </button>
              <button class="control-btn secondary" id="listToggleBtn">
                <span class="btn-icon">ğŸ“‹</span>
                ë¦¬ìŠ¤íŠ¸ ë³´ê¸°
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Map Container -->
    <main class="map-container">
      <!-- Desktop List Panel -->
      <aside class="list-panel desktop-list" id="desktopListPanel">
        <div class="list-header">
          <h3>ì—…ì²´ ëª©ë¡</h3>
          <span class="result-count">ì´ <span id="mapResultCount">8</span>ê°œ</span>
        </div>
        <div class="list-content" id="desktopListContent">
          <!-- List items will be populated by JavaScript -->
        </div>
      </aside>

      <!-- Map -->
      <div class="map-wrapper">
        <div id="map"></div>
      </div>

      <!-- Mobile Bottom Sheet -->
      <div class="mobile-bottom-sheet" id="mobileBottomSheet">
        <div class="sheet-handle"></div>
        <div class="sheet-header">
          <h3>ì—…ì²´ ëª©ë¡</h3>
          <span class="result-count">ì´ <span id="mobileResultCount">8</span>ê°œ</span>
        </div>
        <div class="sheet-content" id="mobileListContent">
          <!-- List items will be populated by JavaScript -->
        </div>
      </div>
    </main>

    <!-- Map Popup Template -->
    <div id="popupTemplate" style="display: none">
      <div class="map-popup">
        <div class="popup-image">
          <img src="" alt="" class="popup-img" />
        </div>
        <div class="popup-content">
          <h4 class="popup-name"></h4>
          <p class="popup-name-en"></p>
          <p class="popup-category"></p>
          <div class="popup-rating">
            <span class="popup-stars"></span>
            <span class="popup-rating-text"></span>
          </div>
          <p class="popup-address"></p>
          <div class="popup-status"></div>
          <button class="popup-btn" onclick="viewBusinessDetails()">ìì„¸íˆ ë³´ê¸°</button>
        </div>
      </div>
    </div>

    <!-- Footer (ë™ì ìœ¼ë¡œ ë¡œë“œ) -->
    <div id="footer-placeholder"></div>

    <!-- Scroll to Top Button -->
    <button id="scrollToTop" class="scroll-to-top" title="ë§¨ ìœ„ë¡œ ê°€ê¸°">â†‘</button>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@2.0.0-alpha.1/dist/leaflet-global.js" crossorigin=""></script>
    <script src="scripts/script.js"></script>
    <script src="scripts/map.js"></script>
    <!-- ê³µí†µ Theme ë¡œë“œ -->
    <script src="scripts/loadTheme.js"></script>
    <!-- ê³µí†µ Footer ë¡œë“œ -->
    <script src="scripts/loadFooter.js"></script>
    <!-- ê³µí†µ ê¸°ëŠ¥ (ìŠ¤í¬ë¡¤ to top ë“±) -->
    <script src="scripts/initScrollToTop.js"></script>

    <script>
      // Dark mode functionality
      document.addEventListener('DOMContentLoaded', function () {
        const themeToggle = document.getElementById('themeToggle');
        const langToggle = document.getElementById('langToggle');
        const body = document.body;
        const themeIcon = document.getElementById('themeIcon');
        const langIcon = langToggle.querySelector('span');

        // Load saved theme and language
        const savedTheme = localStorage.getItem('theme') || 'light';
        const savedLang = localStorage.getItem('language') || 'ko';

        // Apply saved language (themeì€ loadTheme.jsì—ì„œ ì²˜ë¦¬)
        body.setAttribute('lang', savedLang);

        // navbar ë¡œë“œ í›„ ì´ˆê¸°í™”
        setTimeout(() => {
          updateLanguageIcon(savedLang);
          // Navigationì€ loadNavbar.jsì—ì„œ ìë™ ì²˜ë¦¬ë©ë‹ˆë‹¤
          if (typeof window.updateFooter === 'function') {
            window.updateFooter(savedLang);
          }
        }, 100);

        // Theme toggleì€ loadTheme.jsì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤
        // ì–¸ì–´ í† ê¸€ì€ navbarì˜ setupLanguageToggleì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤
        // ê°œë³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” ì œê±°í–ˆìŠµë‹ˆë‹¤

        function updateLanguageIcon(lang) {
          // Update active button based on language
          langToggle.querySelectorAll('.lang-btn').forEach((btn) => {
            btn.classList.remove('active');
            if (btn.getAttribute('data-lang') === lang) {
              btn.classList.add('active');
            }
          });
        }

        // updateNavigationì€ loadNavbar.jsì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤

        // updateFooterëŠ” loadFooter.jsì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤

        // Scroll to top ê¸°ëŠ¥ì€ scripts/common.jsì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤
      });
    </script>
  </body>
</html>
